<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibQuicR: /Users/tievens/Documents/workspace/ws-media10x/libquicr/cmd/examples/server.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LibQuicR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_2_users_2tievens_2_documents_2workspace_2ws-media10x_2libquicr_2cmd_2examples_2server_8cpp-example.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">/Users/tievens/Documents/workspace/ws-media10x/libquicr/cmd/examples/server.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>Map of subscribes (e.g., track alias) sent to announcements</p>
<p>track_alias_set = announce_active[track_namespace_hash][connection_handle]</p>
<div class="fragment"><div class="line"><span class="comment">// SPDX-FileCopyrightText: Copyright (c) 2024 Cisco Systems</span></div>
<div class="line"><span class="comment">// SPDX-License-Identifier: BSD-2-Clause</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;condition_variable&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;oss/cxxopts.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;spdlog/sinks/stdout_color_sinks.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;spdlog/spdlog.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="server_8h.html">quicr/server.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;signal_handler.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="server_8cpp.html#a73f33266768ca7b873b02e85c6451150">TrackNamespaceHash</a> = uint64_t;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="server_8cpp.html#a5e5515782d8791d301e74d310e2cc947">TrackNameHash</a> = uint64_t;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="server_8cpp.html#a0062b24e9cd5dbcee475c711d51368b0">FullTrackNameHash</a> = uint64_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceqserver__vars.html">qserver_vars</a> {</div>
<div class="line">    std::mutex <a id="a0" name="a0"></a><a class="code hl_variable" href="namespaceqserver__vars.html#af994fb542f024c05fc249ccecec62753">state_mutex</a>;</div>
<div class="line"> </div>
<div class="line">    std::unordered_map&lt;<a id="a1" name="a1"></a><a class="code hl_typedef" href="server_8cpp.html#a73f33266768ca7b873b02e85c6451150">TrackNamespaceHash</a>,</div>
<div class="line">                       std::unordered_map&lt;quicr::ConnectionHandle, std::set&lt;quicr::messages::TrackAlias&gt;&gt;&gt;</div>
<div class="line">      <a id="a2" name="a2"></a><a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">announce_active</a>;</div>
<div class="line"> </div>
<div class="line">    std::unordered_map&lt;quicr::messages::TrackAlias,</div>
<div class="line">                       std::unordered_map&lt;quicr::ConnectionHandle, std::shared_ptr&lt;quicr::PublishTrackHandler&gt;&gt;&gt;</div>
<div class="line">      <a id="a3" name="a3"></a><a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">subscribes</a>;</div>
<div class="line"> </div>
<div class="line">    std::unordered_map&lt;<a id="a4" name="a4"></a><a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a>,</div>
<div class="line">                       std::unordered_map&lt;quicr::messages::SubscribeId, quicr::messages::TrackAlias&gt;&gt;</div>
<div class="line">      <a id="a5" name="a5"></a><a class="code hl_variable" href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">subscribe_alias_sub_id</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>SubscribeWho</div>
<div class="line">    {</div>
<div class="line">        uint64_t <a id="a6" name="a6"></a><a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a034c0c80f6721def3b56d310d2a9b11a">connection_handle</a>;</div>
<div class="line">        uint64_t <a id="a7" name="a7"></a><a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a82f9ae32e11ca6e444410d82077ece6e">subscribe_id</a>;</div>
<div class="line">        uint64_t <a id="a8" name="a8"></a><a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#ae5cd08d97972eb09ab59d3320959321b">track_alias</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">bool</span> <a id="a9" name="a9"></a><a class="code hl_function" href="structqserver__vars_1_1_subscribe_who.html#a5932ffc2a63e671e966aedc41a4cd71b">operator&lt;</a>(<span class="keyword">const</span> SubscribeWho&amp; other)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a034c0c80f6721def3b56d310d2a9b11a">connection_handle</a> &lt; other.connection_handle &amp;&amp; <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a82f9ae32e11ca6e444410d82077ece6e">subscribe_id</a> &lt;&lt; other.subscribe_id;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordtype">bool</span> <a id="a10" name="a10"></a><a class="code hl_function" href="structqserver__vars_1_1_subscribe_who.html#a3b9052cdfdfbf770f3a12bb1a1b107cd">operator==</a>(<span class="keyword">const</span> SubscribeWho&amp; other)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a034c0c80f6721def3b56d310d2a9b11a">connection_handle</a> == other.connection_handle &amp;&amp; <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a82f9ae32e11ca6e444410d82077ece6e">subscribe_id</a> == other.subscribe_id;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordtype">bool</span> <a id="a11" name="a11"></a><a class="code hl_function" href="structqserver__vars_1_1_subscribe_who.html#ace937b95bb9aaa284ee0a2db8391fba1">operator&gt;</a>(<span class="keyword">const</span> SubscribeWho&amp; other)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">        </span>{</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a034c0c80f6721def3b56d310d2a9b11a">connection_handle</a> &gt; other.connection_handle &amp;&amp; <a class="code hl_variable" href="structqserver__vars_1_1_subscribe_who.html#a82f9ae32e11ca6e444410d82077ece6e">subscribe_id</a> &gt; other.subscribe_id;</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line">    std::unordered_map&lt;uint64_t, std::unordered_map&lt;uint64_t, std::set&lt;SubscribeWho&gt;&gt;&gt; <a id="a12" name="a12"></a><a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">subscribe_active</a>;</div>
<div class="line"> </div>
<div class="line">    std::unordered_map&lt;quicr::messages::TrackAlias,</div>
<div class="line">                       std::unordered_map&lt;quicr::ConnectionHandle, std::shared_ptr&lt;quicr::SubscribeTrackHandler&gt;&gt;&gt;</div>
<div class="line">      <a id="a13" name="a13"></a><a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">pub_subscribes</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a id="_a14" name="_a14"></a><a class="code hl_class" href="class_my_subscribe_track_handler.html">MySubscribeTrackHandler</a> : <span class="keyword">public</span> <a id="_a15" name="_a15"></a><a class="code hl_class" href="classquicr_1_1_subscribe_track_handler.html">quicr::SubscribeTrackHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a id="a16" name="a16"></a><a class="code hl_function" href="class_my_subscribe_track_handler.html#aa278a745fa426736ccbf33769efa189a">MySubscribeTrackHandler</a>(<span class="keyword">const</span> quicr::FullTrackName&amp; full_track_name)</div>
<div class="line">      : <a id="a17" name="a17"></a><a class="code hl_function" href="classquicr_1_1_subscribe_track_handler.html#a639f890eb93be735534c552ef874c225">SubscribeTrackHandler</a>(full_track_name)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a18" name="a18"></a><a class="code hl_function" href="class_my_subscribe_track_handler.html#a5e81384815a426a79554ede6c10eb30b">ObjectReceived</a>(<span class="keyword">const</span> <a id="_a19" name="_a19"></a><a class="code hl_struct" href="structquicr_1_1_object_headers.html">quicr::ObjectHeaders</a>&amp; object_headers, <a class="code hl_typedef" href="namespacequicr.html#ae1ac30988d32dc3d91fb37721fa99dcb">quicr::BytesSpan</a> data)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        std::lock_guard&lt;std::mutex&gt; _(<a class="code hl_variable" href="namespaceqserver__vars.html#af994fb542f024c05fc249ccecec62753">qserver_vars::state_mutex</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> track_alias = GetTrackAlias();</div>
<div class="line">        <span class="keywordflow">if</span> (!track_alias.has_value()) {</div>
<div class="line">            SPDLOG_DEBUG(<span class="stringliteral">&quot;Data without valid track alias&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> sub_it = <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>.find(track_alias.value());</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (sub_it == <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>.end()) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;No subscribes, not relaying data size: {0} &quot;</span>, data.size());</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [conn_id, pth] : sub_it-&gt;second) {</div>
<div class="line">            pth-&gt;PublishObject(object_headers, data);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a20" name="a20"></a><a class="code hl_function" href="class_my_subscribe_track_handler.html#a1c995931822a75137d765756fea51d64">StatusChanged</a>(<a id="a21" name="a21"></a><a class="code hl_enumeration" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74ee">Status</a> status)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (status == <a id="a22" name="a22"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eeae69fa9a656f76dd8a4d89f21992b2d3a">Status::kOk</a>) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Track alias: {0} is subscribed&quot;</span>, GetTrackAlias().value());</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            std::string reason = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">            <span class="keywordflow">switch</span> (status) {</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a23" name="a23"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea32a54fa8629fe6e9cb3e265e959258d8">Status::kNotConnected</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not connected&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a24" name="a24"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea6eea58710b4bb41e1060ec0b21650de0">Status::kSubscribeError</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;subscribe error&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a25" name="a25"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea94d644150606feeb2501ae2801a617ed">Status::kNotAuthorized</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not authorized&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a26" name="a26"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea92328fe39107890e5ea75689d9e5d32f">Status::kNotSubscribed</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not subscribed&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a27" name="a27"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea0a3ab3e9715377a993aa8530a0a67cdc">Status::kPendingSubscribeResponse</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;pending subscribe response&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a28" name="a28"></a><a class="code hl_enumvalue" href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea0c00fa0c8dbc5959120d45bc8386979f">Status::kSendingUnsubscribe</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;unsubscribing&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Track alias: {0} failed to subscribe reason: {1}&quot;</span>, GetTrackAlias().value(), reason);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a id="_a29" name="_a29"></a><a class="code hl_class" href="class_my_publish_track_handler.html">MyPublishTrackHandler</a> : <span class="keyword">public</span> <a id="_a30" name="_a30"></a><a class="code hl_class" href="classquicr_1_1_publish_track_handler.html">quicr::PublishTrackHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a id="a31" name="a31"></a><a class="code hl_function" href="class_my_publish_track_handler.html#a852d2beea5f7a163942b9e1cb157dd6d">MyPublishTrackHandler</a>(<span class="keyword">const</span> quicr::FullTrackName&amp; full_track_name,</div>
<div class="line">                          quicr::TrackMode track_mode,</div>
<div class="line">                          uint8_t default_priority,</div>
<div class="line">                          uint32_t default_ttl)</div>
<div class="line">      : <a class="code hl_namespace" href="namespacequicr.html">quicr</a>::<a id="a32" name="a32"></a><a class="code hl_function" href="classquicr_1_1_publish_track_handler.html#a01c90daa87d5635743ac0b5129522af3">PublishTrackHandler</a>(full_track_name, track_mode, default_priority, default_ttl)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a33" name="a33"></a><a class="code hl_function" href="class_my_publish_track_handler.html#a668e1111389c1221fb775e9a1aeb340c">StatusChanged</a>(<a id="a34" name="a34"></a><a class="code hl_enumeration" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7">Status</a> status)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (status == <a id="a35" name="a35"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ae69fa9a656f76dd8a4d89f21992b2d3a">Status::kOk</a>) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Publish track alias {0} has subscribers&quot;</span>, GetTrackAlias().value());</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            std::string reason = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">            <span class="keywordflow">switch</span> (status) {</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a36" name="a36"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a32a54fa8629fe6e9cb3e265e959258d8">Status::kNotConnected</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not connected&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a37" name="a37"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a0aacc8d02db06999d93256fad11a0f91">Status::kNotAnnounced</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not announced&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a38" name="a38"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ac1e877c9c6c8271ff158221905113d7b">Status::kAnnounceNotAuthorized</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;not authorized&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a39" name="a39"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ad16e5c0773211b3d591e160d6e4dfbce">Status::kPendingAnnounceResponse</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;pending announce response&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a40" name="a40"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a029c756c36d0d64ad37d82fdd25135ad">Status::kNoSubscribers</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;no subscribers&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> <a id="a41" name="a41"></a><a class="code hl_enumvalue" href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a6473b74b448bc158ffb66542042c88b3">Status::kSendingUnannounce</a>:</div>
<div class="line">                    reason = <span class="stringliteral">&quot;sending unannounce&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Publish track alias: {0} not ready, reason: {1}&quot;</span>, GetTrackAlias().value(), reason);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a42" name="a42"></a><a class="code hl_function" href="class_my_publish_track_handler.html#a1ef4580a8b3a27528c2d217cd27e59cf">MetricsSampled</a>(<span class="keyword">const</span> <a id="_a43" name="_a43"></a><a class="code hl_struct" href="structquicr_1_1_publish_track_metrics.html">quicr::PublishTrackMetrics</a>&amp; metrics)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        SPDLOG_DEBUG(<span class="stringliteral">&quot;Metrics track_alias: {0}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; objects sent: {1}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; bytes sent: {2}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; object duration us: {3}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; queue discards: {4}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; queue size: {5}&quot;</span>,</div>
<div class="line">                     GetTrackAlias().value(),</div>
<div class="line">                     metrics.<a id="a44" name="a44"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics.html#aa00898861132cd32c0fc5a126300af6c">objects_published</a>,</div>
<div class="line">                     metrics.<a id="a45" name="a45"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics.html#a1b904152d53e05c40a548bff30c2c68c">bytes_published</a>,</div>
<div class="line">                     metrics.<a id="a46" name="a46"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics.html#a7e0e7bf91f7f7ff1268bc05bda6d6639">quic</a>.<a id="a47" name="a47"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a035153e90eb912bf57a3726f3772fbe6">tx_object_duration_us</a>.<a id="a48" name="a48"></a><a class="code hl_variable" href="structquicr_1_1_min_max_avg.html#a6d61fe9d36b0defb038738e980ff6096">avg</a>,</div>
<div class="line">                     metrics.<a class="code hl_variable" href="structquicr_1_1_publish_track_metrics.html#a7e0e7bf91f7f7ff1268bc05bda6d6639">quic</a>.<a id="a49" name="a49"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a44eac673c72811e9165a2cbd296e54a8">tx_queue_discards</a>,</div>
<div class="line">                     metrics.<a class="code hl_variable" href="structquicr_1_1_publish_track_metrics.html#a7e0e7bf91f7f7ff1268bc05bda6d6639">quic</a>.<a id="a50" name="a50"></a><a class="code hl_variable" href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a85c44647ddb7ba34458709822f3cc7d8">tx_queue_size</a>.<a class="code hl_variable" href="structquicr_1_1_min_max_avg.html#a6d61fe9d36b0defb038738e980ff6096">avg</a>);</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a id="_a51" name="_a51"></a><a class="code hl_class" href="class_my_server.html">MyServer</a> : <span class="keyword">public</span> <a id="_a52" name="_a52"></a><a class="code hl_class" href="classquicr_1_1_server.html">quicr::Server</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a id="a53" name="a53"></a><a class="code hl_function" href="class_my_server.html#ae37c71a3b200ab8cbdbf55f71ec4babb">MyServer</a>(<span class="keyword">const</span> <a id="_a54" name="_a54"></a><a class="code hl_struct" href="structquicr_1_1_server_config.html">quicr::ServerConfig</a>&amp; cfg)</div>
<div class="line">      : <a class="code hl_namespace" href="namespacequicr.html">quicr</a>::<a id="a55" name="a55"></a><a class="code hl_friend" href="classquicr_1_1_transport.html#ac2055578ac48afabe5af487878450f68">Server</a>(cfg)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a56" name="a56"></a><a class="code hl_function" href="class_my_server.html#aef0194b227496a107d42664f8fefa224">NewConnectionAccepted</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle, <span class="keyword">const</span> ConnectionRemoteInfo&amp; remote)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;New connection handle {0} accepted from {1}:{2}&quot;</span>, connection_handle, remote.ip, remote.port);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a57" name="a57"></a><a class="code hl_function" href="class_my_server.html#a0a3a6e131709b6ac68cd8d2c85a5370d">MetricsSampled</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle, <span class="keyword">const</span> <a id="_a58" name="_a58"></a><a class="code hl_struct" href="structquicr_1_1_connection_metrics.html">quicr::ConnectionMetrics</a>&amp; metrics)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        SPDLOG_DEBUG(<span class="stringliteral">&quot;Metrics connection handle: {0}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; rtt_us: {1}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; srtt_us: {2}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; rate_bps: {3}&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; lost pkts: {4}&quot;</span>,</div>
<div class="line">                     connection_handle,</div>
<div class="line">                     metrics.<a id="a59" name="a59"></a><a class="code hl_variable" href="structquicr_1_1_connection_metrics.html#a1ab84c81e8a08167ff2a2ae08aa117e9">quic</a>.<a id="a60" name="a60"></a><a class="code hl_variable" href="structquicr_1_1_quic_connection_metrics.html#aa3d73277c8ecce73416beb99a09d365b">rtt_us</a>.<a id="a61" name="a61"></a><a class="code hl_variable" href="structquicr_1_1_min_max_avg.html#ac20de44d1787802682cef6e241cb010b">max</a>,</div>
<div class="line">                     metrics.<a class="code hl_variable" href="structquicr_1_1_connection_metrics.html#a1ab84c81e8a08167ff2a2ae08aa117e9">quic</a>.<a id="a62" name="a62"></a><a class="code hl_variable" href="structquicr_1_1_quic_connection_metrics.html#a884a5230461f3f7024a81d4bccad033d">srtt_us</a>.<a class="code hl_variable" href="structquicr_1_1_min_max_avg.html#ac20de44d1787802682cef6e241cb010b">max</a>,</div>
<div class="line">                     metrics.<a class="code hl_variable" href="structquicr_1_1_connection_metrics.html#a1ab84c81e8a08167ff2a2ae08aa117e9">quic</a>.<a id="a63" name="a63"></a><a class="code hl_variable" href="structquicr_1_1_quic_connection_metrics.html#a03a719d44de487ec1472514a3a463825">tx_rate_bps</a>.<a class="code hl_variable" href="structquicr_1_1_min_max_avg.html#ac20de44d1787802682cef6e241cb010b">max</a>,</div>
<div class="line">                     metrics.<a class="code hl_variable" href="structquicr_1_1_connection_metrics.html#a1ab84c81e8a08167ff2a2ae08aa117e9">quic</a>.<a id="a64" name="a64"></a><a class="code hl_variable" href="structquicr_1_1_quic_connection_metrics.html#ae8c463fa544b66d5c676744500062aee">tx_lost_pkts</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a65" name="a65"></a><a class="code hl_function" href="class_my_server.html#ab4060298921e3ee5c546435155cb5407">UnannounceReceived</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle,</div>
<div class="line">                            <span class="keyword">const</span> quicr::TrackNamespace&amp; track_namespace)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keyword">auto</span> th = quicr::TrackHash({ track_namespace, {}, std::nullopt });</div>
<div class="line"> </div>
<div class="line">        SPDLOG_DEBUG(<span class="stringliteral">&quot;Received unannounce from connection handle: {0} for namespace hash: {1}, removing all tracks &quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot;associated with namespace&quot;</span>,</div>
<div class="line">                     connection_handle,</div>
<div class="line">                     th.track_namespace_hash);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> track_alias : <a class="code hl_namespace" href="namespaceqserver__vars.html">qserver_vars</a>::<a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">announce_active</a>[th.track_namespace_hash][connection_handle]) {</div>
<div class="line">            <span class="keyword">auto</span> ptd = <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[track_alias][connection_handle];</div>
<div class="line">            <span class="keywordflow">if</span> (ptd != <span class="keyword">nullptr</span>) {</div>
<div class="line">                SPDLOG_INFO(</div>
<div class="line">                  <span class="stringliteral">&quot;Received unannounce from connection handle: {0} for namespace hash: {1}, removing track alias: {2}&quot;</span>,</div>
<div class="line">                  connection_handle,</div>
<div class="line">                  th.track_namespace_hash,</div>
<div class="line">                  track_alias);</div>
<div class="line"> </div>
<div class="line">                <a id="a66" name="a66"></a><a class="code hl_function" href="classquicr_1_1_transport.html#af595c628c640d1f674f1278fca9ee7cd">UnsubscribeTrack</a>(connection_handle, ptd);</div>
<div class="line">            }</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[track_alias].erase(connection_handle);</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[track_alias].empty()) {</div>
<div class="line">                <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>.erase(track_alias);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>[th.track_namespace_hash].erase(connection_handle);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>[th.track_namespace_hash].empty()) {</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>.erase(th.track_namespace_hash);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a67" name="a67"></a><a class="code hl_function" href="class_my_server.html#ad8aa43518a92cdf1500bec4b4037d50b">AnnounceReceived</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle,</div>
<div class="line">                          <span class="keyword">const</span> quicr::TrackNamespace&amp; track_namespace,</div>
<div class="line">                          <span class="keyword">const</span> <a id="_a68" name="_a68"></a><a class="code hl_struct" href="structquicr_1_1_publish_announce_attributes.html">quicr::PublishAnnounceAttributes</a>&amp;)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keyword">auto</span> th = quicr::TrackHash({ track_namespace, {}, std::nullopt });</div>
<div class="line"> </div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;Received announce from connection handle: {0} for namespace_hash: {1}&quot;</span>,</div>
<div class="line">                    connection_handle,</div>
<div class="line">                    th.track_namespace_hash);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Add to state if not exist</span></div>
<div class="line">        <span class="keyword">auto</span> [anno_conn_it, is_new] =</div>
<div class="line">          <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>[th.track_namespace_hash].try_emplace(connection_handle);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!is_new) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Received announce from connection handle: {0} for namespace hash: {0} is duplicate, ignoring&quot;</span>,</div>
<div class="line">                        connection_handle,</div>
<div class="line">                        th.track_namespace_hash);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        AnnounceResponse announce_response;</div>
<div class="line">        announce_response.reason_code = <a id="a69" name="a69"></a><a class="code hl_enumvalue" href="structquicr_1_1_server_1_1_announce_response.html#ac1d5dc562359c27e3223dbd389502d8fae69fa9a656f76dd8a4d89f21992b2d3a">quicr::Server::AnnounceResponse::ReasonCode::kOk</a>;</div>
<div class="line">        <a id="a70" name="a70"></a><a class="code hl_function" href="classquicr_1_1_server.html#adb4668639df22b2690ec9add2627be6e">ResolveAnnounce</a>(connection_handle, track_namespace, announce_response);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span>&amp; anno_tracks = <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>[th.track_namespace_hash][connection_handle];</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check if there are any subscribes. If so, send subscribe to announce for all tracks matching namespace</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> sub_active_it = <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>.find(th.track_namespace_hash);</div>
<div class="line">        <span class="keywordflow">if</span> (sub_active_it != <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>.end()) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [track_name, who] : sub_active_it-&gt;second) {</div>
<div class="line">                <span class="keywordflow">if</span> (who.size()) { <span class="comment">// Have subscribes</span></div>
<div class="line">                    <span class="keyword">auto</span>&amp; a_who = *who.begin();</div>
<div class="line">                    <span class="keywordflow">if</span> (anno_tracks.find(a_who.track_alias) == anno_tracks.end()) {</div>
<div class="line">                        SPDLOG_INFO(<span class="stringliteral">&quot;Sending subscribe to announcer connection handle: {0} subscribe track_alias: {1}&quot;</span>,</div>
<div class="line">                                    connection_handle,</div>
<div class="line">                                    a_who.track_alias);</div>
<div class="line"> </div>
<div class="line">                        anno_tracks.insert(a_who.track_alias); <span class="comment">// Add track to state</span></div>
<div class="line"> </div>
<div class="line">                        <span class="keyword">const</span> <span class="keyword">auto</span> pub_track_h = <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>[a_who.track_alias][a_who.connection_handle];</div>
<div class="line"> </div>
<div class="line">                        <span class="keyword">auto</span> sub_track_handler =</div>
<div class="line">                          std::make_shared&lt;MySubscribeTrackHandler&gt;(pub_track_h-&gt;GetFullTrackName());</div>
<div class="line"> </div>
<div class="line">                        <a id="a71" name="a71"></a><a class="code hl_function" href="classquicr_1_1_transport.html#a40dd0c703c1d342b51670195bce425c3">SubscribeTrack</a>(connection_handle, sub_track_handler);</div>
<div class="line">                        <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[a_who.track_alias][connection_handle] = sub_track_handler;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a72" name="a72"></a><a class="code hl_function" href="class_my_server.html#a53dd169a44a022e283552a1f71d0e752">ConnectionStatusChanged</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle, <a id="a73" name="a73"></a><a class="code hl_enumeration" href="classquicr_1_1_transport.html#ae5adbdfe900741b6fb2adc0158203389">ConnectionStatus</a> status)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (status == <a id="a74" name="a74"></a><a class="code hl_enumvalue" href="classquicr_1_1_transport.html#ae5adbdfe900741b6fb2adc0158203389a485b505a72a57b16c8dd36bfc17c98c0">ConnectionStatus::kConnected</a>) {</div>
<div class="line">            SPDLOG_DEBUG(<span class="stringliteral">&quot;Connection ready connection_handle: {0} &quot;</span>, connection_handle);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ClientSetupResponse <a id="a75" name="a75"></a><a class="code hl_function" href="class_my_server.html#a70923ba96fdef59b9bb781a0f37bf542">ClientSetupReceived</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a>,</div>
<div class="line">                                            <span class="keyword">const</span> <a id="_a76" name="_a76"></a><a class="code hl_struct" href="structquicr_1_1_client_setup_attributes.html">quicr::ClientSetupAttributes</a>&amp; client_setup_attributes)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        ClientSetupResponse client_setup_response;</div>
<div class="line"> </div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;Client setup received from endpoint_id: {0}&quot;</span>, client_setup_attributes.<a id="a77" name="a77"></a><a class="code hl_variable" href="structquicr_1_1_client_setup_attributes.html#aaaee100e1a8163c135fd0490d84c70cf">endpoint_id</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> client_setup_response;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a78" name="a78"></a><a class="code hl_function" href="class_my_server.html#a1169719b70008b42344d3597d209962c">UnsubscribeReceived</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle, uint64_t subscribe_id)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;Unsubscribe connection handle: {0} subscribe_id: {1}&quot;</span>, connection_handle, subscribe_id);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> ta_conn_it = <a class="code hl_variable" href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">qserver_vars::subscribe_alias_sub_id</a>.find(connection_handle);</div>
<div class="line">        <span class="keywordflow">if</span> (ta_conn_it == <a class="code hl_variable" href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">qserver_vars::subscribe_alias_sub_id</a>.end()) {</div>
<div class="line">            SPDLOG_WARN(<span class="stringliteral">&quot;Unable to find track alias connection for connection handle: {0} subscribe_id: {1}&quot;</span>,</div>
<div class="line">                        connection_handle,</div>
<div class="line">                        subscribe_id);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> ta_it = ta_conn_it-&gt;second.find(subscribe_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ta_it == ta_conn_it-&gt;second.end()) {</div>
<div class="line">            SPDLOG_WARN(<span class="stringliteral">&quot;Unable to find track alias for connection handle: {0} subscribe_id: {1}&quot;</span>,</div>
<div class="line">                        connection_handle,</div>
<div class="line">                        subscribe_id);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        std::lock_guard&lt;std::mutex&gt; _(<a class="code hl_variable" href="namespaceqserver__vars.html#af994fb542f024c05fc249ccecec62753">qserver_vars::state_mutex</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> track_alias = ta_it-&gt;second;</div>
<div class="line"> </div>
<div class="line">        ta_conn_it-&gt;second.erase(ta_it);</div>
<div class="line">        <span class="keywordflow">if</span> (!ta_conn_it-&gt;second.size()) {</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">qserver_vars::subscribe_alias_sub_id</a>.erase(ta_conn_it);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span>&amp; track_h = <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>[track_alias][connection_handle];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (track_h == <span class="keyword">nullptr</span>) {</div>
<div class="line">            SPDLOG_WARN(<span class="stringliteral">&quot;Unsubscribe unable to find track delegate for connection handle: {0} subscribe_id: {1}&quot;</span>,</div>
<div class="line">                        connection_handle,</div>
<div class="line">                        subscribe_id);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> th = quicr::TrackHash(track_h-&gt;GetFullTrackName());</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>[track_alias].erase(connection_handle);</div>
<div class="line">        <span class="keywordtype">bool</span> unsub_pub{ <span class="keyword">false</span> };</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>[track_alias].size()) {</div>
<div class="line">            unsub_pub = <span class="keyword">true</span>;</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>.erase(track_alias);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>[th.track_namespace_hash][th.track_name_hash].erase(</div>
<div class="line">          <a id="_a79" name="_a79"></a><a class="code hl_struct" href="structqserver__vars_1_1_subscribe_who.html">qserver_vars::SubscribeWho</a>{ connection_handle, subscribe_id, th.track_fullname_hash });</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>[th.track_namespace_hash][th.track_name_hash].size()) {</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>[th.track_namespace_hash].erase(th.track_name_hash);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>[th.track_namespace_hash].size()) {</div>
<div class="line">            <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>.erase(th.track_namespace_hash);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (unsub_pub) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;No subscribers left, unsubscribe publisher track_alias: {0}&quot;</span>, track_alias);</div>
<div class="line"> </div>
<div class="line">            <span class="keyword">auto</span> anno_ns_it = <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>.find(th.track_namespace_hash);</div>
<div class="line">            <span class="keywordflow">if</span> (anno_ns_it == <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>.end()) {</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [connection_handler, tracks] : anno_ns_it-&gt;second) {</div>
<div class="line">                <span class="keywordflow">if</span> (tracks.find(th.track_fullname_hash) == tracks.end()) {</div>
<div class="line">                    SPDLOG_INFO(<span class="stringliteral">&quot;Unsubscribe to announcer conn_id: {0} subscribe track_alias: {1}&quot;</span>,</div>
<div class="line">                                connection_handler,</div>
<div class="line">                                th.track_fullname_hash);</div>
<div class="line"> </div>
<div class="line">                    tracks.erase(th.track_fullname_hash); <span class="comment">// Add track alias to state</span></div>
<div class="line"> </div>
<div class="line">                    <span class="keyword">auto</span> sub_track_h = <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[th.track_fullname_hash][connection_handler];</div>
<div class="line">                    <span class="keywordflow">if</span> (sub_track_h != <span class="keyword">nullptr</span>) {</div>
<div class="line">                        <a class="code hl_function" href="classquicr_1_1_transport.html#af595c628c640d1f674f1278fca9ee7cd">UnsubscribeTrack</a>(connection_handle, sub_track_h);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a id="a80" name="a80"></a><a class="code hl_function" href="class_my_server.html#aec1f0b47e085b0e7298caa7c1bd0dbbc">SubscribeReceived</a>(<a class="code hl_typedef" href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a> connection_handle,</div>
<div class="line">                           uint64_t subscribe_id,</div>
<div class="line">                           [[maybe_unused]] uint64_t proposed_track_alias,</div>
<div class="line">                           <span class="keyword">const</span> quicr::FullTrackName&amp; track_full_name,</div>
<div class="line">                           <span class="keyword">const</span> <a id="_a81" name="_a81"></a><a class="code hl_struct" href="structquicr_1_1_subscribe_attributes.html">quicr::SubscribeAttributes</a>&amp;)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keyword">auto</span> th = quicr::TrackHash(track_full_name);</div>
<div class="line"> </div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;New subscribe connection handle: {0} subscribe_id: {1} track alias: {2}&quot;</span>,</div>
<div class="line">                    connection_handle,</div>
<div class="line">                    subscribe_id,</div>
<div class="line">                    th.track_fullname_hash);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> pub_track_h =</div>
<div class="line">          std::make_shared&lt;MyPublishTrackHandler&gt;(track_full_name, quicr::TrackMode::kStreamPerGroup, 2, 5000);</div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a>[th.track_fullname_hash][connection_handle] = pub_track_h;</div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">qserver_vars::subscribe_alias_sub_id</a>[connection_handle][subscribe_id] = th.track_fullname_hash;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// record subscribe as active from this subscriber</span></div>
<div class="line">        <a class="code hl_variable" href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a>[th.track_namespace_hash][th.track_name_hash].emplace(</div>
<div class="line">          <a class="code hl_struct" href="structqserver__vars_1_1_subscribe_who.html">qserver_vars::SubscribeWho</a>{ connection_handle, subscribe_id, th.track_fullname_hash });</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Create a subscribe track that will be used by the relay to send to subscriber for matching objects</span></div>
<div class="line">        <a id="a82" name="a82"></a><a class="code hl_function" href="classquicr_1_1_server.html#a1335e1be0983ccddf4de0b6964f21bc6">BindPublisherTrack</a>(connection_handle, subscribe_id, pub_track_h);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Subscribe to announcer if announcer is active</span></div>
<div class="line">        <span class="keyword">auto</span> anno_ns_it = <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>.find(th.track_namespace_hash);</div>
<div class="line">        <span class="keywordflow">if</span> (anno_ns_it == <a class="code hl_variable" href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a>.end()) {</div>
<div class="line">            SPDLOG_INFO(<span class="stringliteral">&quot;Subscribe to track namespace hash: {0}, does not have any announcements.&quot;</span>,</div>
<div class="line">                        th.track_namespace_hash);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [conn_h, tracks] : anno_ns_it-&gt;second) {</div>
<div class="line">            <span class="keywordflow">if</span> (tracks.find(th.track_fullname_hash) == tracks.end()) {</div>
<div class="line">                SPDLOG_INFO(<span class="stringliteral">&quot;Sending subscribe to announcer connection handler: {0} subscribe track_alias: {1}&quot;</span>,</div>
<div class="line">                            conn_h,</div>
<div class="line">                            th.track_fullname_hash);</div>
<div class="line"> </div>
<div class="line">                tracks.insert(th.track_fullname_hash); <span class="comment">// Add track alias to state</span></div>
<div class="line"> </div>
<div class="line">                <span class="keyword">auto</span> sub_track_h = std::make_shared&lt;MySubscribeTrackHandler&gt;(track_full_name);</div>
<div class="line">                <a class="code hl_function" href="classquicr_1_1_transport.html#a40dd0c703c1d342b51670195bce425c3">SubscribeTrack</a>(conn_h, sub_track_h);</div>
<div class="line">                <a class="code hl_variable" href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a>[th.track_fullname_hash][conn_h] = sub_track_h;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* -------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * Main program</span></div>
<div class="line"><span class="comment"> * -------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><a class="code hl_struct" href="structquicr_1_1_server_config.html">quicr::ServerConfig</a></div>
<div class="line"><a id="a83" name="a83"></a><a class="code hl_function" href="client_8cpp.html#acd905285c0fe6cb2c7c23bdb7a461f36">InitConfig</a>(cxxopts::ParseResult&amp; cli_opts)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structquicr_1_1_server_config.html">quicr::ServerConfig</a> config;</div>
<div class="line"> </div>
<div class="line">    std::string qlog_path;</div>
<div class="line">    <span class="keywordflow">if</span> (cli_opts.count(<span class="stringliteral">&quot;qlog&quot;</span>)) {</div>
<div class="line">        qlog_path = cli_opts[<span class="stringliteral">&quot;qlog&quot;</span>].as&lt;std::string&gt;();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (cli_opts.count(<span class="stringliteral">&quot;debug&quot;</span>) &amp;&amp; cli_opts[<span class="stringliteral">&quot;debug&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;() == <span class="keyword">true</span>) {</div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;setting debug level&quot;</span>);</div>
<div class="line">        spdlog::default_logger()-&gt;set_level(spdlog::level::debug);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (cli_opts.count(<span class="stringliteral">&quot;version&quot;</span>) &amp;&amp; cli_opts[<span class="stringliteral">&quot;version&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;() == <span class="keyword">true</span>) {</div>
<div class="line">        SPDLOG_INFO(<span class="stringliteral">&quot;QuicR library version: {}&quot;</span>, QUICR_VERSION);</div>
<div class="line">        exit(0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    config.<a id="a84" name="a84"></a><a class="code hl_variable" href="structquicr_1_1_config.html#ac61dcd9337d55b4694552338af12fe2e">endpoint_id</a> = cli_opts[<span class="stringliteral">&quot;endpoint_id&quot;</span>].as&lt;std::string&gt;();</div>
<div class="line"> </div>
<div class="line">    config.<a id="a85" name="a85"></a><a class="code hl_variable" href="structquicr_1_1_server_config.html#a600aeb1938992178f439f50a73dec508">server_bind_ip</a> = cli_opts[<span class="stringliteral">&quot;bind_ip&quot;</span>].as&lt;std::string&gt;();</div>
<div class="line">    config.<a id="a86" name="a86"></a><a class="code hl_variable" href="structquicr_1_1_server_config.html#ad89c841e7e25fd909452b6d1550a4c78">server_port</a> = cli_opts[<span class="stringliteral">&quot;port&quot;</span>].as&lt;uint16_t&gt;();</div>
<div class="line"> </div>
<div class="line">    config.<a id="a87" name="a87"></a><a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.debug = cli_opts[<span class="stringliteral">&quot;debug&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line">    config.<a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.tls_cert_filename = cli_opts[<span class="stringliteral">&quot;cert&quot;</span>].as&lt;std::string&gt;();</div>
<div class="line">    config.<a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.tls_key_filename = cli_opts[<span class="stringliteral">&quot;key&quot;</span>].as&lt;std::string&gt;();</div>
<div class="line">    config.<a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.use_reset_wait_strategy = <span class="keyword">false</span>;</div>
<div class="line">    config.<a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.time_queue_max_duration = 5000;</div>
<div class="line">    config.<a class="code hl_variable" href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">transport_config</a>.quic_qlog_path = qlog_path;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> config;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line"><a id="a88" name="a88"></a><a class="code hl_function" href="client_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result_code = EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    cxxopts::Options options(<span class="stringliteral">&quot;qclient&quot;</span>,</div>
<div class="line">                             std::string(<span class="stringliteral">&quot;MOQ Example Server using QuicR Version: &quot;</span>) + std::string(QUICR_VERSION));</div>
<div class="line">    options.set_width(75).set_tab_expansion().allow_unrecognised_options().add_options()(<span class="stringliteral">&quot;h,help&quot;</span>, <span class="stringliteral">&quot;Print help&quot;</span>)(</div>
<div class="line">      <span class="stringliteral">&quot;d,debug&quot;</span>, <span class="stringliteral">&quot;Enable debugging&quot;</span>) <span class="comment">// a bool parameter</span></div>
<div class="line">      (<span class="stringliteral">&quot;v,version&quot;</span>, <span class="stringliteral">&quot;QuicR Version&quot;</span>) <span class="comment">// a bool parameter</span></div>
<div class="line">      (<span class="stringliteral">&quot;b,bind_ip&quot;</span>, <span class="stringliteral">&quot;Bind IP&quot;</span>, cxxopts::value&lt;std::string&gt;()-&gt;default_value(<span class="stringliteral">&quot;127.0.0.1&quot;</span>))(</div>
<div class="line">        <span class="stringliteral">&quot;p,port&quot;</span>, <span class="stringliteral">&quot;Listening port&quot;</span>, cxxopts::value&lt;uint16_t&gt;()-&gt;default_value(<span class="stringliteral">&quot;1234&quot;</span>))(</div>
<div class="line">        <span class="stringliteral">&quot;e,endpoint_id&quot;</span>, <span class="stringliteral">&quot;This relay/server endpoint ID&quot;</span>, cxxopts::value&lt;std::string&gt;()-&gt;default_value(<span class="stringliteral">&quot;moq-server&quot;</span>))(</div>
<div class="line">        <span class="stringliteral">&quot;c,cert&quot;</span>, <span class="stringliteral">&quot;Certificate file&quot;</span>, cxxopts::value&lt;std::string&gt;()-&gt;default_value(<span class="stringliteral">&quot;./server-cert.pem&quot;</span>))(</div>
<div class="line">        <span class="stringliteral">&quot;k,key&quot;</span>, <span class="stringliteral">&quot;Certificate key file&quot;</span>, cxxopts::value&lt;std::string&gt;()-&gt;default_value(<span class="stringliteral">&quot;./server-key.pem&quot;</span>))(</div>
<div class="line">        <span class="stringliteral">&quot;q,qlog&quot;</span>, <span class="stringliteral">&quot;Enable qlog using path&quot;</span>, cxxopts::value&lt;std::string&gt;()); <span class="comment">// end of options</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> result = options.parse(argc, argv);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (result.count(<span class="stringliteral">&quot;help&quot;</span>)) {</div>
<div class="line">        std::cout &lt;&lt; options.help({ <span class="stringliteral">&quot;&quot;</span> }) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Install a signal handlers to catch operating system signals</span></div>
<div class="line">    installSignalHandlers();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Lock the mutex so that main can then wait on it</span></div>
<div class="line">    std::unique_lock&lt;std::mutex&gt; lock(moq_example::main_mutex);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structquicr_1_1_server_config.html">quicr::ServerConfig</a> config = <a class="code hl_function" href="client_8cpp.html#acd905285c0fe6cb2c7c23bdb7a461f36">InitConfig</a>(result);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <span class="keyword">auto</span> server = std::make_shared&lt;MyServer&gt;(config);</div>
<div class="line">        <span class="keywordflow">if</span> (server-&gt;Start() != <a id="a89" name="a89"></a><a class="code hl_enumvalue" href="classquicr_1_1_transport.html#a1fc1ea2c9665c591c4eac8a6ff1b6173a25d5606fe07425ea73f245c48612c039">quicr::Transport::Status::kReady</a>) {</div>
<div class="line">            SPDLOG_ERROR(<span class="stringliteral">&quot;Server failed to start&quot;</span>);</div>
<div class="line">            exit(-2);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Wait until told to terminate</span></div>
<div class="line">        moq_example::cv.wait(lock, [&amp;]() { <span class="keywordflow">return</span> moq_example::terminate; });</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Unlock the mutex</span></div>
<div class="line">        lock.unlock();</div>
<div class="line">    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::invalid_argument&amp; e) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Invalid argument: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">        result_code = EXIT_FAILURE;</div>
<div class="line">    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Unexpected exception: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line">        result_code = EXIT_FAILURE;</div>
<div class="line">    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Unexpected exception&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        result_code = EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> result_code;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_my_publish_track_handler_html"><div class="ttname"><a href="class_my_publish_track_handler.html">MyPublishTrackHandler</a></div><div class="ttdoc">Publish track handler.</div><div class="ttdef"><b>Definition</b> client.cpp:54</div></div>
<div class="ttc" id="aclass_my_publish_track_handler_html_a1ef4580a8b3a27528c2d217cd27e59cf"><div class="ttname"><a href="class_my_publish_track_handler.html#a1ef4580a8b3a27528c2d217cd27e59cf">MyPublishTrackHandler::MetricsSampled</a></div><div class="ttdeci">void MetricsSampled(const quicr::PublishTrackMetrics &amp;metrics) override</div><div class="ttdoc">Notification callback to provide sampled metrics.</div><div class="ttdef"><b>Definition</b> server.cpp:205</div></div>
<div class="ttc" id="aclass_my_publish_track_handler_html_a668e1111389c1221fb775e9a1aeb340c"><div class="ttname"><a href="class_my_publish_track_handler.html#a668e1111389c1221fb775e9a1aeb340c">MyPublishTrackHandler::StatusChanged</a></div><div class="ttdeci">void StatusChanged(Status status) override</div><div class="ttdoc">Notification of publish track status change.</div><div class="ttdef"><b>Definition</b> client.cpp:64</div></div>
<div class="ttc" id="aclass_my_publish_track_handler_html_a852d2beea5f7a163942b9e1cb157dd6d"><div class="ttname"><a href="class_my_publish_track_handler.html#a852d2beea5f7a163942b9e1cb157dd6d">MyPublishTrackHandler::MyPublishTrackHandler</a></div><div class="ttdeci">MyPublishTrackHandler(const quicr::FullTrackName &amp;full_track_name, quicr::TrackMode track_mode, uint8_t default_priority, uint32_t default_ttl)</div><div class="ttdef"><b>Definition</b> client.cpp:56</div></div>
<div class="ttc" id="aclass_my_server_html"><div class="ttname"><a href="class_my_server.html">MyServer</a></div><div class="ttdoc">MoQ Server.</div><div class="ttdef"><b>Definition</b> server.cpp:227</div></div>
<div class="ttc" id="aclass_my_server_html_a0a3a6e131709b6ac68cd8d2c85a5370d"><div class="ttname"><a href="class_my_server.html#a0a3a6e131709b6ac68cd8d2c85a5370d">MyServer::MetricsSampled</a></div><div class="ttdeci">void MetricsSampled(quicr::ConnectionHandle connection_handle, const quicr::ConnectionMetrics &amp;metrics) override</div><div class="ttdef"><b>Definition</b> server.cpp:239</div></div>
<div class="ttc" id="aclass_my_server_html_a1169719b70008b42344d3597d209962c"><div class="ttname"><a href="class_my_server.html#a1169719b70008b42344d3597d209962c">MyServer::UnsubscribeReceived</a></div><div class="ttdeci">void UnsubscribeReceived(quicr::ConnectionHandle connection_handle, uint64_t subscribe_id) override</div><div class="ttdoc">Callback notification on unsubscribe received.</div><div class="ttdef"><b>Definition</b> server.cpp:356</div></div>
<div class="ttc" id="aclass_my_server_html_a53dd169a44a022e283552a1f71d0e752"><div class="ttname"><a href="class_my_server.html#a53dd169a44a022e283552a1f71d0e752">MyServer::ConnectionStatusChanged</a></div><div class="ttdeci">void ConnectionStatusChanged(quicr::ConnectionHandle connection_handle, ConnectionStatus status) override</div><div class="ttdef"><b>Definition</b> server.cpp:339</div></div>
<div class="ttc" id="aclass_my_server_html_a70923ba96fdef59b9bb781a0f37bf542"><div class="ttname"><a href="class_my_server.html#a70923ba96fdef59b9bb781a0f37bf542">MyServer::ClientSetupReceived</a></div><div class="ttdeci">ClientSetupResponse ClientSetupReceived(quicr::ConnectionHandle, const quicr::ClientSetupAttributes &amp;client_setup_attributes) override</div><div class="ttdoc">Callback on client setup message.</div><div class="ttdef"><b>Definition</b> server.cpp:346</div></div>
<div class="ttc" id="aclass_my_server_html_ab4060298921e3ee5c546435155cb5407"><div class="ttname"><a href="class_my_server.html#ab4060298921e3ee5c546435155cb5407">MyServer::UnannounceReceived</a></div><div class="ttdeci">void UnannounceReceived(quicr::ConnectionHandle connection_handle, const quicr::TrackNamespace &amp;track_namespace) override</div><div class="ttdef"><b>Definition</b> server.cpp:253</div></div>
<div class="ttc" id="aclass_my_server_html_ad8aa43518a92cdf1500bec4b4037d50b"><div class="ttname"><a href="class_my_server.html#ad8aa43518a92cdf1500bec4b4037d50b">MyServer::AnnounceReceived</a></div><div class="ttdeci">void AnnounceReceived(quicr::ConnectionHandle connection_handle, const quicr::TrackNamespace &amp;track_namespace, const quicr::PublishAnnounceAttributes &amp;) override</div><div class="ttdef"><b>Definition</b> server.cpp:286</div></div>
<div class="ttc" id="aclass_my_server_html_ae37c71a3b200ab8cbdbf55f71ec4babb"><div class="ttname"><a href="class_my_server.html#ae37c71a3b200ab8cbdbf55f71ec4babb">MyServer::MyServer</a></div><div class="ttdeci">MyServer(const quicr::ServerConfig &amp;cfg)</div><div class="ttdef"><b>Definition</b> server.cpp:229</div></div>
<div class="ttc" id="aclass_my_server_html_aec1f0b47e085b0e7298caa7c1bd0dbbc"><div class="ttname"><a href="class_my_server.html#aec1f0b47e085b0e7298caa7c1bd0dbbc">MyServer::SubscribeReceived</a></div><div class="ttdeci">void SubscribeReceived(quicr::ConnectionHandle connection_handle, uint64_t subscribe_id, uint64_t proposed_track_alias, const quicr::FullTrackName &amp;track_full_name, const quicr::SubscribeAttributes &amp;) override</div><div class="ttdef"><b>Definition</b> server.cpp:439</div></div>
<div class="ttc" id="aclass_my_server_html_aef0194b227496a107d42664f8fefa224"><div class="ttname"><a href="class_my_server.html#aef0194b227496a107d42664f8fefa224">MyServer::NewConnectionAccepted</a></div><div class="ttdeci">void NewConnectionAccepted(quicr::ConnectionHandle connection_handle, const ConnectionRemoteInfo &amp;remote) override</div><div class="ttdef"><b>Definition</b> server.cpp:234</div></div>
<div class="ttc" id="aclass_my_subscribe_track_handler_html"><div class="ttname"><a href="class_my_subscribe_track_handler.html">MySubscribeTrackHandler</a></div><div class="ttdoc">Subscribe track handler.</div><div class="ttdef"><b>Definition</b> client.cpp:22</div></div>
<div class="ttc" id="aclass_my_subscribe_track_handler_html_a1c995931822a75137d765756fea51d64"><div class="ttname"><a href="class_my_subscribe_track_handler.html#a1c995931822a75137d765756fea51d64">MySubscribeTrackHandler::StatusChanged</a></div><div class="ttdeci">void StatusChanged(Status status) override</div><div class="ttdoc">Notification of subscribe status.</div><div class="ttdef"><b>Definition</b> client.cpp:35</div></div>
<div class="ttc" id="aclass_my_subscribe_track_handler_html_a5e81384815a426a79554ede6c10eb30b"><div class="ttname"><a href="class_my_subscribe_track_handler.html#a5e81384815a426a79554ede6c10eb30b">MySubscribeTrackHandler::ObjectReceived</a></div><div class="ttdeci">void ObjectReceived(const quicr::ObjectHeaders &amp;, quicr::BytesSpan data) override</div><div class="ttdoc">Notification of received [full] data object.</div><div class="ttdef"><b>Definition</b> client.cpp:29</div></div>
<div class="ttc" id="aclass_my_subscribe_track_handler_html_aa278a745fa426736ccbf33769efa189a"><div class="ttname"><a href="class_my_subscribe_track_handler.html#aa278a745fa426736ccbf33769efa189a">MySubscribeTrackHandler::MySubscribeTrackHandler</a></div><div class="ttdeci">MySubscribeTrackHandler(const quicr::FullTrackName &amp;full_track_name)</div><div class="ttdef"><b>Definition</b> client.cpp:24</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html">quicr::PublishTrackHandler</a></div><div class="ttdoc">MOQ track handler for published track.</div><div class="ttdef"><b>Definition</b> publish_track_handler.h:22</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_a01c90daa87d5635743ac0b5129522af3"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#a01c90daa87d5635743ac0b5129522af3">quicr::PublishTrackHandler::PublishTrackHandler</a></div><div class="ttdeci">PublishTrackHandler(const FullTrackName &amp;full_track_name, TrackMode track_mode, uint8_t default_priority, uint32_t default_ttl)</div><div class="ttdoc">Publish track handler constructor.</div><div class="ttdef"><b>Definition</b> publish_track_handler.h:78</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7">quicr::PublishTrackHandler::Status</a></div><div class="ttdeci">Status</div><div class="ttdoc">Status codes for the publish track.</div><div class="ttdef"><b>Definition</b> publish_track_handler.h:59</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7a029c756c36d0d64ad37d82fdd25135ad"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a029c756c36d0d64ad37d82fdd25135ad">quicr::PublishTrackHandler::Status::kNoSubscribers</a></div><div class="ttdeci">@ kNoSubscribers</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7a0aacc8d02db06999d93256fad11a0f91"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a0aacc8d02db06999d93256fad11a0f91">quicr::PublishTrackHandler::Status::kNotAnnounced</a></div><div class="ttdeci">@ kNotAnnounced</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7a32a54fa8629fe6e9cb3e265e959258d8"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a32a54fa8629fe6e9cb3e265e959258d8">quicr::PublishTrackHandler::Status::kNotConnected</a></div><div class="ttdeci">@ kNotConnected</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7a6473b74b448bc158ffb66542042c88b3"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7a6473b74b448bc158ffb66542042c88b3">quicr::PublishTrackHandler::Status::kSendingUnannounce</a></div><div class="ttdeci">@ kSendingUnannounce</div><div class="ttdoc">In this state, callbacks will not be called.</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7ac1e877c9c6c8271ff158221905113d7b"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ac1e877c9c6c8271ff158221905113d7b">quicr::PublishTrackHandler::Status::kAnnounceNotAuthorized</a></div><div class="ttdeci">@ kAnnounceNotAuthorized</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7ad16e5c0773211b3d591e160d6e4dfbce"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ad16e5c0773211b3d591e160d6e4dfbce">quicr::PublishTrackHandler::Status::kPendingAnnounceResponse</a></div><div class="ttdeci">@ kPendingAnnounceResponse</div></div>
<div class="ttc" id="aclassquicr_1_1_publish_track_handler_html_af50c21bea085782c5c0c8f2958a921f7ae69fa9a656f76dd8a4d89f21992b2d3a"><div class="ttname"><a href="classquicr_1_1_publish_track_handler.html#af50c21bea085782c5c0c8f2958a921f7ae69fa9a656f76dd8a4d89f21992b2d3a">quicr::PublishTrackHandler::Status::kOk</a></div><div class="ttdeci">@ kOk</div></div>
<div class="ttc" id="aclassquicr_1_1_server_html"><div class="ttname"><a href="classquicr_1_1_server.html">quicr::Server</a></div><div class="ttdoc">MoQ Server.</div><div class="ttdef"><b>Definition</b> server.h:21</div></div>
<div class="ttc" id="aclassquicr_1_1_server_html_a1335e1be0983ccddf4de0b6964f21bc6"><div class="ttname"><a href="classquicr_1_1_server.html#a1335e1be0983ccddf4de0b6964f21bc6">quicr::Server::BindPublisherTrack</a></div><div class="ttdeci">void BindPublisherTrack(ConnectionHandle connection_handle, uint64_t subscribe_id, const std::shared_ptr&lt; PublishTrackHandler &gt; &amp;track_handler)</div><div class="ttdoc">Bind a server publish track handler based on a subscribe.</div></div>
<div class="ttc" id="aclassquicr_1_1_server_html_adb4668639df22b2690ec9add2627be6e"><div class="ttname"><a href="classquicr_1_1_server.html#adb4668639df22b2690ec9add2627be6e">quicr::Server::ResolveAnnounce</a></div><div class="ttdeci">void ResolveAnnounce(ConnectionHandle connection_handle, const TrackNamespace &amp;track_namespace, const AnnounceResponse &amp;announce_response)</div><div class="ttdoc">Accept or reject an announce that was received.</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html">quicr::SubscribeTrackHandler</a></div><div class="ttdoc">MOQ track handler for subscribed track.</div><div class="ttdef"><b>Definition</b> subscribe_track_handler.h:21</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a639f890eb93be735534c552ef874c225"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a639f890eb93be735534c552ef874c225">quicr::SubscribeTrackHandler::SubscribeTrackHandler</a></div><div class="ttdeci">SubscribeTrackHandler(const FullTrackName &amp;full_track_name)</div><div class="ttdoc">Subscribe track handler constructor.</div><div class="ttdef"><b>Definition</b> subscribe_track_handler.h:54</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74ee"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74ee">quicr::SubscribeTrackHandler::Status</a></div><div class="ttdeci">Status</div><div class="ttdoc">Status codes for the subscribe track.</div><div class="ttdef"><b>Definition</b> subscribe_track_handler.h:38</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea0a3ab3e9715377a993aa8530a0a67cdc"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea0a3ab3e9715377a993aa8530a0a67cdc">quicr::SubscribeTrackHandler::Status::kPendingSubscribeResponse</a></div><div class="ttdeci">@ kPendingSubscribeResponse</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea0c00fa0c8dbc5959120d45bc8386979f"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea0c00fa0c8dbc5959120d45bc8386979f">quicr::SubscribeTrackHandler::Status::kSendingUnsubscribe</a></div><div class="ttdeci">@ kSendingUnsubscribe</div><div class="ttdoc">In this state, callbacks will not be called.</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea32a54fa8629fe6e9cb3e265e959258d8"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea32a54fa8629fe6e9cb3e265e959258d8">quicr::SubscribeTrackHandler::Status::kNotConnected</a></div><div class="ttdeci">@ kNotConnected</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea6eea58710b4bb41e1060ec0b21650de0"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea6eea58710b4bb41e1060ec0b21650de0">quicr::SubscribeTrackHandler::Status::kSubscribeError</a></div><div class="ttdeci">@ kSubscribeError</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea92328fe39107890e5ea75689d9e5d32f"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea92328fe39107890e5ea75689d9e5d32f">quicr::SubscribeTrackHandler::Status::kNotSubscribed</a></div><div class="ttdeci">@ kNotSubscribed</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eea94d644150606feeb2501ae2801a617ed"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eea94d644150606feeb2501ae2801a617ed">quicr::SubscribeTrackHandler::Status::kNotAuthorized</a></div><div class="ttdeci">@ kNotAuthorized</div></div>
<div class="ttc" id="aclassquicr_1_1_subscribe_track_handler_html_a9de21a18d0ef99ddba39efc9833d74eeae69fa9a656f76dd8a4d89f21992b2d3a"><div class="ttname"><a href="classquicr_1_1_subscribe_track_handler.html#a9de21a18d0ef99ddba39efc9833d74eeae69fa9a656f76dd8a4d89f21992b2d3a">quicr::SubscribeTrackHandler::Status::kOk</a></div><div class="ttdeci">@ kOk</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_a1fc1ea2c9665c591c4eac8a6ff1b6173a25d5606fe07425ea73f245c48612c039"><div class="ttname"><a href="classquicr_1_1_transport.html#a1fc1ea2c9665c591c4eac8a6ff1b6173a25d5606fe07425ea73f245c48612c039">quicr::Transport::Status::kReady</a></div><div class="ttdeci">@ kReady</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_a40dd0c703c1d342b51670195bce425c3"><div class="ttname"><a href="classquicr_1_1_transport.html#a40dd0c703c1d342b51670195bce425c3">quicr::Transport::SubscribeTrack</a></div><div class="ttdeci">void SubscribeTrack(ConnectionHandle connection_handle, std::shared_ptr&lt; SubscribeTrackHandler &gt; track_handler)</div><div class="ttdoc">Subscribe to a track.</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_ac2055578ac48afabe5af487878450f68"><div class="ttname"><a href="classquicr_1_1_transport.html#ac2055578ac48afabe5af487878450f68">quicr::Transport::Server</a></div><div class="ttdeci">friend class Server</div><div class="ttdef"><b>Definition</b> transport.h:329</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_ae5adbdfe900741b6fb2adc0158203389"><div class="ttname"><a href="classquicr_1_1_transport.html#ae5adbdfe900741b6fb2adc0158203389">quicr::Transport::ConnectionStatus</a></div><div class="ttdeci">ConnectionStatus</div><div class="ttdoc">Connection status codes.</div><div class="ttdef"><b>Definition</b> transport.h:74</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_ae5adbdfe900741b6fb2adc0158203389a485b505a72a57b16c8dd36bfc17c98c0"><div class="ttname"><a href="classquicr_1_1_transport.html#ae5adbdfe900741b6fb2adc0158203389a485b505a72a57b16c8dd36bfc17c98c0">quicr::Transport::ConnectionStatus::kConnected</a></div><div class="ttdeci">@ kConnected</div></div>
<div class="ttc" id="aclassquicr_1_1_transport_html_af595c628c640d1f674f1278fca9ee7cd"><div class="ttname"><a href="classquicr_1_1_transport.html#af595c628c640d1f674f1278fca9ee7cd">quicr::Transport::UnsubscribeTrack</a></div><div class="ttdeci">void UnsubscribeTrack(ConnectionHandle connection_handle, const std::shared_ptr&lt; SubscribeTrackHandler &gt; &amp;track_handler)</div><div class="ttdoc">Unsubscribe track.</div></div>
<div class="ttc" id="aclient_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="client_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition</b> client.cpp:271</div></div>
<div class="ttc" id="aclient_8cpp_html_acd905285c0fe6cb2c7c23bdb7a461f36"><div class="ttname"><a href="client_8cpp.html#acd905285c0fe6cb2c7c23bdb7a461f36">InitConfig</a></div><div class="ttdeci">quicr::ClientConfig InitConfig(cxxopts::ParseResult &amp;cli_opts, bool &amp;enable_pub, bool &amp;enable_sub)</div><div class="ttdef"><b>Definition</b> client.cpp:219</div></div>
<div class="ttc" id="anamespaceqserver__vars_html"><div class="ttname"><a href="namespaceqserver__vars.html">qserver_vars</a></div><div class="ttdef"><b>Definition</b> server.cpp:19</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_a452c2f2de14305f863d24ca97e89cccd"><div class="ttname"><a href="namespaceqserver__vars.html#a452c2f2de14305f863d24ca97e89cccd">qserver_vars::announce_active</a></div><div class="ttdeci">std::unordered_map&lt; TrackNamespaceHash, std::unordered_map&lt; quicr::ConnectionHandle, std::set&lt; quicr::messages::TrackAlias &gt; &gt; &gt; announce_active</div><div class="ttdef"><b>Definition</b> server.cpp:30</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_a4c4dd08f8680a101def50658bc7382cb"><div class="ttname"><a href="namespaceqserver__vars.html#a4c4dd08f8680a101def50658bc7382cb">qserver_vars::subscribes</a></div><div class="ttdeci">std::unordered_map&lt; quicr::messages::TrackAlias, std::unordered_map&lt; quicr::ConnectionHandle, std::shared_ptr&lt; quicr::PublishTrackHandler &gt; &gt; &gt; subscribes</div><div class="ttdef"><b>Definition</b> server.cpp:42</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_a5c10a712b48093f503bd70f63e659339"><div class="ttname"><a href="namespaceqserver__vars.html#a5c10a712b48093f503bd70f63e659339">qserver_vars::subscribe_alias_sub_id</a></div><div class="ttdeci">std::unordered_map&lt; quicr::ConnectionHandle, std::unordered_map&lt; quicr::messages::SubscribeId, quicr::messages::TrackAlias &gt; &gt; subscribe_alias_sub_id</div><div class="ttdef"><b>Definition</b> server.cpp:53</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_a8e8e406967b31ced32485d892d81038b"><div class="ttname"><a href="namespaceqserver__vars.html#a8e8e406967b31ced32485d892d81038b">qserver_vars::pub_subscribes</a></div><div class="ttdeci">std::unordered_map&lt; quicr::messages::TrackAlias, std::unordered_map&lt; quicr::ConnectionHandle, std::shared_ptr&lt; quicr::SubscribeTrackHandler &gt; &gt; &gt; pub_subscribes</div><div class="ttdef"><b>Definition</b> server.cpp:88</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_ad49f01904ebc7120ba2d565a0a94ba98"><div class="ttname"><a href="namespaceqserver__vars.html#ad49f01904ebc7120ba2d565a0a94ba98">qserver_vars::subscribe_active</a></div><div class="ttdeci">std::unordered_map&lt; uint64_t, std::unordered_map&lt; uint64_t, std::set&lt; SubscribeWho &gt; &gt; &gt; subscribe_active</div><div class="ttdef"><b>Definition</b> server.cpp:78</div></div>
<div class="ttc" id="anamespaceqserver__vars_html_af994fb542f024c05fc249ccecec62753"><div class="ttname"><a href="namespaceqserver__vars.html#af994fb542f024c05fc249ccecec62753">qserver_vars::state_mutex</a></div><div class="ttdeci">std::mutex state_mutex</div><div class="ttdef"><b>Definition</b> server.cpp:20</div></div>
<div class="ttc" id="anamespacequicr_html"><div class="ttname"><a href="namespacequicr.html">quicr</a></div><div class="ttdef"><b>Definition</b> common.h:9</div></div>
<div class="ttc" id="anamespacequicr_html_ae1ac30988d32dc3d91fb37721fa99dcb"><div class="ttname"><a href="namespacequicr.html#ae1ac30988d32dc3d91fb37721fa99dcb">quicr::BytesSpan</a></div><div class="ttdeci">Span&lt; const Byte &gt; BytesSpan</div><div class="ttdef"><b>Definition</b> common.h:19</div></div>
<div class="ttc" id="anamespacequicr_html_ae332e51a43d09ae0300bd16654d671fc"><div class="ttname"><a href="namespacequicr.html#ae332e51a43d09ae0300bd16654d671fc">quicr::ConnectionHandle</a></div><div class="ttdeci">uint64_t ConnectionHandle</div><div class="ttdef"><b>Definition</b> common.h:20</div></div>
<div class="ttc" id="aserver_8cpp_html_a0062b24e9cd5dbcee475c711d51368b0"><div class="ttname"><a href="server_8cpp.html#a0062b24e9cd5dbcee475c711d51368b0">FullTrackNameHash</a></div><div class="ttdeci">uint64_t FullTrackNameHash</div><div class="ttdef"><b>Definition</b> server.cpp:17</div></div>
<div class="ttc" id="aserver_8cpp_html_a5e5515782d8791d301e74d310e2cc947"><div class="ttname"><a href="server_8cpp.html#a5e5515782d8791d301e74d310e2cc947">TrackNameHash</a></div><div class="ttdeci">uint64_t TrackNameHash</div><div class="ttdef"><b>Definition</b> server.cpp:16</div></div>
<div class="ttc" id="aserver_8cpp_html_a73f33266768ca7b873b02e85c6451150"><div class="ttname"><a href="server_8cpp.html#a73f33266768ca7b873b02e85c6451150">TrackNamespaceHash</a></div><div class="ttdeci">uint64_t TrackNamespaceHash</div><div class="ttdef"><b>Definition</b> server.cpp:15</div></div>
<div class="ttc" id="aserver_8h_html"><div class="ttname"><a href="server_8h.html">server.h</a></div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html">qserver_vars::SubscribeWho</a></div><div class="ttdef"><b>Definition</b> server.cpp:60</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_a034c0c80f6721def3b56d310d2a9b11a"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#a034c0c80f6721def3b56d310d2a9b11a">qserver_vars::SubscribeWho::connection_handle</a></div><div class="ttdeci">uint64_t connection_handle</div><div class="ttdef"><b>Definition</b> server.cpp:61</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_a3b9052cdfdfbf770f3a12bb1a1b107cd"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#a3b9052cdfdfbf770f3a12bb1a1b107cd">qserver_vars::SubscribeWho::operator==</a></div><div class="ttdeci">bool operator==(const SubscribeWho &amp;other) const</div><div class="ttdef"><b>Definition</b> server.cpp:69</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_a5932ffc2a63e671e966aedc41a4cd71b"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#a5932ffc2a63e671e966aedc41a4cd71b">qserver_vars::SubscribeWho::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const SubscribeWho &amp;other) const</div><div class="ttdef"><b>Definition</b> server.cpp:65</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_a82f9ae32e11ca6e444410d82077ece6e"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#a82f9ae32e11ca6e444410d82077ece6e">qserver_vars::SubscribeWho::subscribe_id</a></div><div class="ttdeci">uint64_t subscribe_id</div><div class="ttdef"><b>Definition</b> server.cpp:62</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_ace937b95bb9aaa284ee0a2db8391fba1"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#ace937b95bb9aaa284ee0a2db8391fba1">qserver_vars::SubscribeWho::operator&gt;</a></div><div class="ttdeci">bool operator&gt;(const SubscribeWho &amp;other) const</div><div class="ttdef"><b>Definition</b> server.cpp:73</div></div>
<div class="ttc" id="astructqserver__vars_1_1_subscribe_who_html_ae5cd08d97972eb09ab59d3320959321b"><div class="ttname"><a href="structqserver__vars_1_1_subscribe_who.html#ae5cd08d97972eb09ab59d3320959321b">qserver_vars::SubscribeWho::track_alias</a></div><div class="ttdeci">uint64_t track_alias</div><div class="ttdef"><b>Definition</b> server.cpp:63</div></div>
<div class="ttc" id="astructquicr_1_1_client_setup_attributes_html"><div class="ttname"><a href="structquicr_1_1_client_setup_attributes.html">quicr::ClientSetupAttributes</a></div><div class="ttdoc">Client Setup Attributes.</div><div class="ttdef"><b>Definition</b> common.h:42</div></div>
<div class="ttc" id="astructquicr_1_1_client_setup_attributes_html_aaaee100e1a8163c135fd0490d84c70cf"><div class="ttname"><a href="structquicr_1_1_client_setup_attributes.html#aaaee100e1a8163c135fd0490d84c70cf">quicr::ClientSetupAttributes::endpoint_id</a></div><div class="ttdeci">const std::string endpoint_id</div><div class="ttdef"><b>Definition</b> common.h:43</div></div>
<div class="ttc" id="astructquicr_1_1_config_html_ac61dcd9337d55b4694552338af12fe2e"><div class="ttname"><a href="structquicr_1_1_config.html#ac61dcd9337d55b4694552338af12fe2e">quicr::Config::endpoint_id</a></div><div class="ttdeci">std::string endpoint_id</div><div class="ttdef"><b>Definition</b> config.h:14</div></div>
<div class="ttc" id="astructquicr_1_1_config_html_ad8895576bc8e8fba62da81e6096c1aea"><div class="ttname"><a href="structquicr_1_1_config.html#ad8895576bc8e8fba62da81e6096c1aea">quicr::Config::transport_config</a></div><div class="ttdeci">quicr::TransportConfig transport_config</div><div class="ttdef"><b>Definition</b> config.h:17</div></div>
<div class="ttc" id="astructquicr_1_1_connection_metrics_html"><div class="ttname"><a href="structquicr_1_1_connection_metrics.html">quicr::ConnectionMetrics</a></div><div class="ttdef"><b>Definition</b> metrics.h:14</div></div>
<div class="ttc" id="astructquicr_1_1_connection_metrics_html_a1ab84c81e8a08167ff2a2ae08aa117e9"><div class="ttname"><a href="structquicr_1_1_connection_metrics.html#a1ab84c81e8a08167ff2a2ae08aa117e9">quicr::ConnectionMetrics::quic</a></div><div class="ttdeci">QuicConnectionMetrics quic</div><div class="ttdoc">QUIC connection metrics.</div><div class="ttdef"><b>Definition</b> metrics.h:17</div></div>
<div class="ttc" id="astructquicr_1_1_min_max_avg_html_a6d61fe9d36b0defb038738e980ff6096"><div class="ttname"><a href="structquicr_1_1_min_max_avg.html#a6d61fe9d36b0defb038738e980ff6096">quicr::MinMaxAvg::avg</a></div><div class="ttdeci">uint64_t avg</div><div class="ttdoc">Maximum value in period.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:18</div></div>
<div class="ttc" id="astructquicr_1_1_min_max_avg_html_ac20de44d1787802682cef6e241cb010b"><div class="ttname"><a href="structquicr_1_1_min_max_avg.html#ac20de44d1787802682cef6e241cb010b">quicr::MinMaxAvg::max</a></div><div class="ttdeci">uint64_t max</div><div class="ttdoc">Minimum value in period.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:17</div></div>
<div class="ttc" id="astructquicr_1_1_object_headers_html"><div class="ttname"><a href="structquicr_1_1_object_headers.html">quicr::ObjectHeaders</a></div><div class="ttdoc">Object headers struct.</div><div class="ttdef"><b>Definition</b> object.h:20</div></div>
<div class="ttc" id="astructquicr_1_1_publish_announce_attributes_html"><div class="ttname"><a href="structquicr_1_1_publish_announce_attributes.html">quicr::PublishAnnounceAttributes</a></div><div class="ttdoc">Publish announce attributes.</div><div class="ttdef"><b>Definition</b> common.h:36</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_1_1_quic_html_a035153e90eb912bf57a3726f3772fbe6"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a035153e90eb912bf57a3726f3772fbe6">quicr::PublishTrackMetrics::Quic::tx_object_duration_us</a></div><div class="ttdeci">MinMaxAvg tx_object_duration_us</div><div class="ttdoc">TX object time in queue duration in microseconds.</div><div class="ttdef"><b>Definition</b> metrics.h:46</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_1_1_quic_html_a44eac673c72811e9165a2cbd296e54a8"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a44eac673c72811e9165a2cbd296e54a8">quicr::PublishTrackMetrics::Quic::tx_queue_discards</a></div><div class="ttdeci">uint64_t tx_queue_discards</div><div class="ttdoc">count of objects discarded due to TTL expiry or clear</div><div class="ttdef"><b>Definition</b> metrics.h:38</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_1_1_quic_html_a85c44647ddb7ba34458709822f3cc7d8"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics_1_1_quic.html#a85c44647ddb7ba34458709822f3cc7d8">quicr::PublishTrackMetrics::Quic::tx_queue_size</a></div><div class="ttdeci">MinMaxAvg tx_queue_size</div><div class="ttdoc">TX queue size in period.</div><div class="ttdef"><b>Definition</b> metrics.h:44</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_html"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics.html">quicr::PublishTrackMetrics</a></div><div class="ttdef"><b>Definition</b> metrics.h:29</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_html_a1b904152d53e05c40a548bff30c2c68c"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics.html#a1b904152d53e05c40a548bff30c2c68c">quicr::PublishTrackMetrics::bytes_published</a></div><div class="ttdeci">uint64_t bytes_published</div><div class="ttdoc">sum of payload bytes published</div><div class="ttdef"><b>Definition</b> metrics.h:32</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_html_a7e0e7bf91f7f7ff1268bc05bda6d6639"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics.html#a7e0e7bf91f7f7ff1268bc05bda6d6639">quicr::PublishTrackMetrics::quic</a></div><div class="ttdeci">struct quicr::PublishTrackMetrics::Quic quic</div></div>
<div class="ttc" id="astructquicr_1_1_publish_track_metrics_html_aa00898861132cd32c0fc5a126300af6c"><div class="ttname"><a href="structquicr_1_1_publish_track_metrics.html#aa00898861132cd32c0fc5a126300af6c">quicr::PublishTrackMetrics::objects_published</a></div><div class="ttdeci">uint64_t objects_published</div><div class="ttdoc">count of objects published</div><div class="ttdef"><b>Definition</b> metrics.h:33</div></div>
<div class="ttc" id="astructquicr_1_1_quic_connection_metrics_html_a03a719d44de487ec1472514a3a463825"><div class="ttname"><a href="structquicr_1_1_quic_connection_metrics.html#a03a719d44de487ec1472514a3a463825">quicr::QuicConnectionMetrics::tx_rate_bps</a></div><div class="ttdeci">MinMaxAvg tx_rate_bps</div><div class="ttdoc">Rate in bits per second in period.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:74</div></div>
<div class="ttc" id="astructquicr_1_1_quic_connection_metrics_html_a884a5230461f3f7024a81d4bccad033d"><div class="ttname"><a href="structquicr_1_1_quic_connection_metrics.html#a884a5230461f3f7024a81d4bccad033d">quicr::QuicConnectionMetrics::srtt_us</a></div><div class="ttdeci">MinMaxAvg srtt_us</div><div class="ttdoc">Smooth Round trip time in microseconds in period.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:79</div></div>
<div class="ttc" id="astructquicr_1_1_quic_connection_metrics_html_aa3d73277c8ecce73416beb99a09d365b"><div class="ttname"><a href="structquicr_1_1_quic_connection_metrics.html#aa3d73277c8ecce73416beb99a09d365b">quicr::QuicConnectionMetrics::rtt_us</a></div><div class="ttdeci">MinMaxAvg rtt_us</div><div class="ttdoc">Round trip time in microseconds in period.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:78</div></div>
<div class="ttc" id="astructquicr_1_1_quic_connection_metrics_html_ae8c463fa544b66d5c676744500062aee"><div class="ttname"><a href="structquicr_1_1_quic_connection_metrics.html#ae8c463fa544b66d5c676744500062aee">quicr::QuicConnectionMetrics::tx_lost_pkts</a></div><div class="ttdeci">uint64_t tx_lost_pkts</div><div class="ttdoc">Number of lost packets sent.</div><div class="ttdef"><b>Definition</b> quic_transport_metrics.h:82</div></div>
<div class="ttc" id="astructquicr_1_1_server_1_1_announce_response_html_ac1d5dc562359c27e3223dbd389502d8fae69fa9a656f76dd8a4d89f21992b2d3a"><div class="ttname"><a href="structquicr_1_1_server_1_1_announce_response.html#ac1d5dc562359c27e3223dbd389502d8fae69fa9a656f76dd8a4d89f21992b2d3a">quicr::Server::AnnounceResponse::ReasonCode::kOk</a></div><div class="ttdeci">@ kOk</div></div>
<div class="ttc" id="astructquicr_1_1_server_config_html"><div class="ttname"><a href="structquicr_1_1_server_config.html">quicr::ServerConfig</a></div><div class="ttdef"><b>Definition</b> config.h:27</div></div>
<div class="ttc" id="astructquicr_1_1_server_config_html_a600aeb1938992178f439f50a73dec508"><div class="ttname"><a href="structquicr_1_1_server_config.html#a600aeb1938992178f439f50a73dec508">quicr::ServerConfig::server_bind_ip</a></div><div class="ttdeci">std::string server_bind_ip</div><div class="ttdef"><b>Definition</b> config.h:29</div></div>
<div class="ttc" id="astructquicr_1_1_server_config_html_ad89c841e7e25fd909452b6d1550a4c78"><div class="ttname"><a href="structquicr_1_1_server_config.html#ad89c841e7e25fd909452b6d1550a4c78">quicr::ServerConfig::server_port</a></div><div class="ttdeci">uint16_t server_port</div><div class="ttdoc">Listening port for server.</div><div class="ttdef"><b>Definition</b> config.h:31</div></div>
<div class="ttc" id="astructquicr_1_1_subscribe_attributes_html"><div class="ttname"><a href="structquicr_1_1_subscribe_attributes.html">quicr::SubscribeAttributes</a></div><div class="ttdoc">Subscribe attributes.</div><div class="ttdef"><b>Definition</b> common.h:28</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
